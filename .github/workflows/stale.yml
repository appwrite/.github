name: Mark stale issues

on:
  workflow_call:
    inputs:
      stale-issue-message:
        description: 'Message to post on issues when marking them as stale'
        required: false
        type: string
        default: "This issue has been labeled as a 'question', indicating that it requires additional information from the requestor. It has been inactive for 7 days. If no further activity occurs, this issue will be closed in 14 days."
      stale-issue-label:
        description: 'Label to apply to stale issues'
        required: false
        type: string
        default: 'stale'
      days-before-stale:
        description: 'Number of days of inactivity before an issue is marked as stale'
        required: false
        type: number
        default: 7
      days-before-close:
        description: 'Number of days of inactivity before a stale issue is closed'
        required: false
        type: number
        default: 14
      remove-stale-when-updated:
        description: 'Remove stale label when an issue is updated'
        required: false
        type: boolean
        default: true
      close-issue-message:
        description: 'Message to post on issues when closing them'
        required: false
        type: string
        default: "This issue has been closed due to inactivity. If you still require assistance, please provide the requested information."
      close-issue-reason:
        description: 'Reason for closing the issue (completed, not_planned, reopened)'
        required: false
        type: string
        default: 'not_planned'
      operations-per-run:
        description: 'Maximum number of operations per run'
        required: false
        type: number
        default: 100
      only-labels:
        description: 'Only process issues with these labels (comma separated)'
        required: false
        type: string
        default: 'question'

jobs:
  stale:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          stale-issue-message: ${{ inputs.stale-issue-message }}
          stale-issue-label: ${{ inputs.stale-issue-label }}
          days-before-stale: ${{ inputs.days-before-stale }}
          days-before-close: ${{ inputs.days-before-close }}
          remove-stale-when-updated: ${{ inputs.remove-stale-when-updated }}
          close-issue-message: ${{ inputs.close-issue-message }}
          close-issue-reason: ${{ inputs.close-issue-reason }}
          operations-per-run: ${{ inputs.operations-per-run }}
          only-labels: ${{ inputs.only-labels }}
